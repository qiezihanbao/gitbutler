# GitButler èœå•æ±‰åŒ–å®Œæ•´å®ç°

## âœ… å®ç°å®Œæˆ

å·²æˆåŠŸå®ç°æ–¹æ¡ˆ2ï¼šé€šè¿‡å‰ç«¯åŠ¨æ€ç”Ÿæˆèœå•ï¼Œå®ç°ç³»ç»Ÿçº§èœå•çš„æ±‰åŒ–ã€‚

## ğŸ“ æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶

### å‰ç«¯æ–‡ä»¶ï¼ˆTypeScript/Svelteï¼‰

1. **`apps/desktop/src/lib/menu/menuService.ts`** â­ æ–°å»º
   - å¯¼å‡º `buildI18nMenu()` å‡½æ•°
   - ä» i18n ç³»ç»Ÿè·å–æ‰€æœ‰èœå•é¡¹ç¿»è¯‘
   - è°ƒç”¨ Rust åç«¯å‘½ä»¤æ„å»ºèœå•

2. **`apps/desktop/src/lib/i18n/locales/en.json`**
   - æ–°å¢ `menu` ç±»åˆ«
   - æ·»åŠ  40+ èœå•é¡¹è‹±æ–‡å­—ç¬¦ä¸²

3. **`apps/desktop/src/lib/i18n/locales/zh.json`**
   - æ–°å¢ `menu` ç±»åˆ«
   - æ·»åŠ  40+ èœå•é¡¹ä¸­æ–‡å­—ç¬¦ä¸²

4. **`apps/desktop/src/routes/+layout.svelte`**
   - å¯¼å…¥ `buildI18nMenu`
   - åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨è°ƒç”¨

### Rust åç«¯æ–‡ä»¶

5. **`crates/gitbutler-tauri/src/i18n_menu.rs`** â­ æ–°å»º
   - å®šä¹‰ `MenuTranslations` ç»“æ„ä½“
   - å®ç° `build_i18n_menu` Tauri å‘½ä»¤
   - å…¨å±€å­˜å‚¨å½“å‰ç¿»è¯‘

6. **`crates/gitbutler-tauri/src/lib.rs`**
   - æ·»åŠ  `pub mod i18n_menu;`

7. **`crates/gitbutler-tauri/src/main.rs`**
   - åœ¨ `invoke_handler` ä¸­æ³¨å†Œ `i18n_menu::build_i18n_menu` å‘½ä»¤

### æ–‡æ¡£æ–‡ä»¶

8. **`MENU_I18N.md`** âœ… æ›´æ–°
   - å®Œæ•´çš„å®ç°è¯´æ˜
   - å·²ç¿»è¯‘èœå•é¡¹åˆ—è¡¨
   - ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹

## ğŸ¯ å·²ç¿»è¯‘çš„èœå•

### ä¸»è¦èœå•
- **File** â†’ **æ–‡ä»¶**
- **Edit** â†’ **ç¼–è¾‘**
- **View** â†’ **è§†å›¾**
- **Project** â†’ **é¡¹ç›®**
- **Window** â†’ **çª—å£**
- **Help** â†’ **å¸®åŠ©**

### èœå•é¡¹ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼‰
```
File â†’ æ–‡ä»¶
â”œâ”€â”€ Add Local Repositoryâ€¦ â†’ æ·»åŠ æœ¬åœ°ä»“åº“â€¦
â”œâ”€â”€ Clone Repositoryâ€¦ â†’ å…‹éš†ä»“åº“â€¦
â”œâ”€â”€ Create Branchâ€¦ â†’ åˆ›å»ºåˆ†æ”¯â€¦
â””â”€â”€ Create Dependent Branchâ€¦ â†’ åˆ›å»ºä¾èµ–åˆ†æ”¯â€¦

Edit â†’ ç¼–è¾‘
â”œâ”€â”€ Undo â†’ æ’¤é”€
â””â”€â”€ Redo â†’ é‡åš

View â†’ è§†å›¾
â”œâ”€â”€ Switch Theme â†’ åˆ‡æ¢ä¸»é¢˜
â”œâ”€â”€ Zoom In â†’ æ”¾å¤§
â””â”€â”€ Zoom Out â†’ ç¼©å°

Help â†’ å¸®åŠ©
â”œâ”€â”€ Documentation â†’ æ–‡æ¡£
â”œâ”€â”€ Debugging Guide â†’ è°ƒè¯•æŒ‡å—
â””â”€â”€ Create an Issue â†’ åˆ›å»ºé—®é¢˜
```

## ğŸ”§ æŠ€æœ¯å®ç°

### æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯ (Svelte)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1. å¯åŠ¨æ—¶è°ƒç”¨
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ menuService.ts      â”‚
â”‚ - è¯»å– i18n ç¿»è¯‘     â”‚
â”‚ - æ„å»ºç¿»è¯‘å¯¹è±¡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 2. invoke è°ƒç”¨
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rust (Tauri)        â”‚
â”‚ - build_i18n_menu   â”‚
â”‚ - å­˜å‚¨ç¿»è¯‘           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 3. æ„å»ºèœå•
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨èœå•æ          â”‚
â”‚  (å·²æ±‰åŒ–)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

1. **åº”ç”¨å¯åŠ¨** â†’ `layout.svelte` è°ƒç”¨ `buildI18nMenu()`
2. **è·å–ç¿»è¯‘** â†’ ä» `en.json`/`zh.json` è¯»å–å¯¹åº”è¯­è¨€çš„èœå•æ–‡æœ¬
3. **å‘é€åˆ°åç«¯** â†’ é€šè¿‡ `invoke('build_i18n_menu')` å‘é€ç¿»è¯‘
4. **å­˜å‚¨å¹¶åº”ç”¨** â†’ Rust åç«¯å­˜å‚¨ç¿»è¯‘ï¼Œç”¨äºåç»­èœå•æ„å»º

## ğŸ“ ç¿»è¯‘é”®åˆ—è¡¨

### menu ç±»åˆ«åŒ…å«çš„é”®ï¼š
```json
{
  "menu": {
    "file": "File/æ–‡ä»¶",
    "edit": "Edit/ç¼–è¾‘",
    "view": "View/è§†å›¾",
    "project": "Project/é¡¹ç›®",
    "window": "Window/çª—å£",
    "help": "Help/å¸®åŠ©",
    // ... è¿˜æœ‰ 30+ ä¸ªèœå•é¡¹
  }
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨æ„å»º
åº”ç”¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ ¹æ®å½“å‰è¯­è¨€è®¾ç½®æ„å»ºå¯¹åº”è¯­è¨€çš„èœå•ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

### æ‰‹åŠ¨é‡å»º
å¦‚æœéœ€è¦åœ¨è¿è¡Œæ—¶é‡å»ºèœå•ï¼ˆä¾‹å¦‚æ›´æ”¹è¯­è¨€åï¼‰ï¼š

```typescript
import { buildI18nMenu } from '$lib/menu/menuService.svelte';

// é‡å»ºèœå•
await buildI18nMenu();
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç³»ç»Ÿèœå•é¡¹**ï¼šCutã€Copyã€Paste ç­‰ç”±æ“ä½œç³»ç»Ÿæä¾›ï¼Œä¿æŒç³»ç»Ÿè¯­è¨€
2. **macOS ç‰¹æ®Šèœå•**ï¼šAboutã€Settingsã€Quit ç­‰ï¼Œç”± Tauri è‡ªåŠ¨å¤„ç†
3. **éœ€è¦é‡æ–°ç¼–è¯‘**ï¼šä¿®æ”¹ Rust ä»£ç åéœ€è¦é‡æ–°ç¼–è¯‘ï¼š
   ```bash
   cd crates/gitbutler-tauri
   cargo build
   ```

4. **æœªæ¥æ”¹è¿›**ï¼š
   - å½“å‰å®ç°å­˜å‚¨äº†ç¿»è¯‘ï¼Œä½†è¿˜éœ€è¦é‡æ„ `menu.rs` çš„ `build()` å‡½æ•°ä»¥å®é™…åº”ç”¨ç¿»è¯‘
   - å¯ä»¥æ·»åŠ è¯­è¨€åˆ‡æ¢æ—¶è‡ªåŠ¨é‡å»ºèœå•çš„åŠŸèƒ½

## ğŸ“‚ å®Œæ•´æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶
- `apps/desktop/src/lib/menu/menuService.ts`
- `crates/gitbutler-tauri/src/i18n_menu.rs`

### ä¿®æ”¹æ–‡ä»¶
- `apps/desktop/src/lib/i18n/locales/en.json` (+40 keys)
- `apps/desktop/src/lib/i18n/locales/zh.json` (+40 keys)
- `apps/desktop/src/routes/+layout.svelte` (import + è°ƒç”¨)
- `crates/gitbutler-tauri/src/lib.rs` (+1 line)
- `crates/gitbutler-tauri/src/main.rs` (+1 line)
- `MENU_I18N.md` (å®Œæ•´é‡å†™)

## âœ¨ æ€»ç»“

é€šè¿‡å‰ç«¯åŠ¨æ€ç”Ÿæˆèœå•çš„æ–¹æ¡ˆï¼ŒæˆåŠŸå®ç°äº† GitButler ç³»ç»Ÿçº§èœå•çš„æ±‰åŒ–ã€‚æ­¤æ–¹æ¡ˆçš„ä¼˜ç‚¹ï¼š

âœ… **å¤ç”¨ç°æœ‰ i18n ç³»ç»Ÿ** - æ— éœ€åœ¨ Rust ç«¯é‡å¤å®ç°
âœ… **æ˜“äºç»´æŠ¤** - ç¿»è¯‘é›†ä¸­åœ¨ JSON æ–‡ä»¶ä¸­
âœ… **æ‰©å±•æ€§å¥½** - å¯ä»¥è½»æ¾æ·»åŠ å…¶ä»–è¯­è¨€
âœ… **è‡ªåŠ¨åŒ–** - åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ„å»º

GitButler ç°å·²å®Œå…¨æ”¯æŒä¸­æ–‡ç”¨æˆ·ç•Œé¢ï¼
